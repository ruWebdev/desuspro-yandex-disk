# Руководство по работе с проектом в GitHub

## Оглавление
1. [Ветки (Branches)](#ветки-branches)
2. [Процесс разработки](#процесс-разработки)
3. [Коммиты](#коммиты)
4. [Pull Requests](#pull-requests)
5. [Развертывание](#развертывание)

## Ветки (Branches)

### Основные ветки
- `main` - стабильная ветка, соответствует production-окружению (https://art.coccodrillo.ru)
- `develop` - ветка для тестирования, соответствует test-окружению (https://devart.coccodrillo.ru)

### Ветки для разработки
Названия веток должны быть описательными и следовать формату:
- `feature/[JIRA-ключ]-краткое-описание` - для новой функциональности
- `bugfix/[JIRA-ключ]-краткое-описание` - для исправления багов
- `hotfix/[JIRA-ключ]-краткое-описание` - для срочных исправлений в production
- `refactor/[JIRA-ключ]-краткое-описание` - для рефакторинга кода

## Процесс разработки

1. **Перед началом работы**
   - Убедитесь, что у вас актуальная версия ветки `develop`
   - Создайте новую ветку от `develop` по шаблону, указанному выше

2. **В процессе работы**
   - Делайте частые коммиты с осмысленными сообщениями
   - Регулярно обновляйте свою ветку из `develop`, чтобы избежать конфликтов
   - Проверяйте код на соответствие стандартам (PHP CS Fixer, ESLint)

3. **Завершение работы**
   - Убедитесь, что все тесты проходят
   - Обновите документацию, если это необходимо
   - Создайте Pull Request в ветку `develop`

## Коммиты

Сообщения коммитов должны быть на английском языке и следовать формату:

```
[тип] Краткое описание (до 50 символов)

Подробное описание (если необходимо).
Может быть несколько строк.

JIRA: PROJECT-123
```

### Типы коммитов:
- `feat` - новая функциональность
- `fix` - исправление ошибок
- `docs` - изменения в документации
- `style` - форматирование, отсутствующие точки с запятой и т.д. (без изменений в коде)
- `refactor` - рефакторинг кода
- `perf` - изменения, улучшающие производительность
- `test` - добавление тестов
- `chore` - обновление задач сборки, настройка менеджера пакетов и т.д.

## Pull Requests

1. **Перед созданием PR**
   - Убедитесь, что ваш код соответствует стандартам
   - Обновите свою ветку из `develop`
   - Запустите тесты
   - Проверьте, что все проверки проходят успешно

2. **Создание PR**
   - Перейдите в репозиторий: [github.com/ruWebdev/desuspro-yandex-disk](https://github.com/ruWebdev/desuspro-yandex-disk)
   - Нажмите "New pull request"
   - Выберите base: `develop` ← compare: `ваша-ветка`
   - Название PR должно быть информативным и следовать формату: `[тип] Краткое описание`
   - В описании укажите:
     - Что было сделано
     - Как это проверить
     - Скриншоты (если применимо)
     - Ссылку на задачу в JIRA (если есть)
   - Назначьте ревьюеров из команды
   - Добавьте соответствующие лейблы (bug, enhancement, documentation и т.д.)

3. **После создания PR**
   - Дождитесь успешного прохождения всех проверок GitHub Actions
   - Устраните замечания ревьюеров
   - После одобрения выполните squash and merge через веб-интерфейс GitHub

## Развертывание

### Тестовое окружение (staging)
- Автоматическое развертывание при пуше в ветку `develop`
- Доступно по адресу: [https://devart.coccodrillo.ru](https://devart.coccodrillo.ru)
- Проверяйте логи деплоя в Actions → Workflows → Deploy

### Продакшн (production)
- Развертывание происходит при мерже в ветку `main`
- Процесс:
  1. Создайте PR из `develop` в `main`
  2. После одобрения выполните merge через веб-интерфейс GitHub
  3. Автоматический деплой на продакшн
- Доступно по адресу: [https://art.coccodrillo.ru](https://art.coccodrillo.ru)
- Проверяйте логи деплоя в Actions → Workflows → Deploy

## Начало работы

### Клонирование репозитория

```bash
# Клонируем основной репозиторий (нужны права доступа)
git clone git@github.com:ruWebdev/desuspro-yandex-disk.git
cd desuspro-yandex-disk

# Убедитесь, что origin указывает на основной репозиторий
git remote -v
# Должно быть что-то вроде:
# origin  git@github.com:ruWebdev/desuspro-yandex-disk.git (fetch)
# origin  git@github.com:ruWebdev/desuspro-yandex-disk.git (push)
```

### Настройка доступа

1. Убедитесь, что у вас есть доступ к репозиторию в организации ruWebdev
2. Если у вас нет доступа, запросите его у администратора репозитория
3. Для работы с репозиторием рекомендуется настроить SSH-ключи в настройках вашего GitHub-аккаунта

### Рекомендуемые настройки Git

```bash
# Установите ваше имя и email (если еще не сделали)
git config --global user.name "Ваше Имя"
git config --global user.email "ваш.email@example.com"

# Включите цветной вывод в консоли
git config --global color.ui auto

# Установите редактор по умолчанию (например, VS Code)
git config --global core.editor "code --wait"
```

## Рабочий процесс

1. **Перед началом работы**
   ```bash
   # Получить последние изменения с сервера
   git fetch origin
   
   # Переключиться на ветку develop и обновить её
   git checkout develop
   git pull origin develop
   
   # Создать новую ветку от актуальной develop
   git checkout -b feature/feature-name
   ```

2. **Перед коммитом**
   ```bash
   # Проверить статус изменений
   git status
   
   # Добавить изменения в индекс
   git add .
   
   # Проверить изменения перед коммитом
   git diff --cached
   
   # Создать коммит
   git commit -m "[тип] Краткое описание"
   ```

3. **Отправка изменений**
   ```bash
   # Отправить ветку в репозиторий
   git push -u origin feature/feature-name
   ```
   После этого можно создать Pull Request через веб-интерфейс GitHub, выбрав ветку `develop` как целевую.

## Полезные команды Git

```bash
# Просмотр истории коммитов
git log --oneline --graph --all -n 20

# Отмена изменений в файле
git checkout -- путь/к/файлу

# Сброс индекса
git reset HEAD путь/к/файлу

# Обновление ветки из upstream
git fetch upstream
git rebase upstream/develop

# Интерактивный rebase последних N коммитов
git rebase -i HEAD~N
```

## Решение проблем

### Конфликты при rebase
1. При возникновении конфликтов:
   ```bash
   # Редактируем файлы с конфликтами
   # Добавляем исправленные файлы
   git add .
   
   # Продолжаем rebase
   git rebase --continue
   ```

### Отмена rebase
```bash
git rebase --abort
```

### Изменение последнего коммита
```bash
# Внести изменения в файлы
git add .
git commit --amend
# Сохранить и закрыть редактор
```

## Контакты

По вопросам, связанным с работой в GitHub, обращайтесь к @team-lead.
